<html>
	<h1>Brownie Recipe!!</h1>
	<h2>Units</h2>
	<p id='units'>
		<span>
			Weight:
			<select id='weightUnit' onchange="doChange()">
				<option data-value='$vg' data-mult=1 data-offset=0 data-decimals=0>
					Grams
				</option>
				<option data-value='$voz' data-mult=0.0352733686 data-offset=0 data-decimals=1>
					Ounces
				</option>
			</select>
		</span>
		</br>
		<span>
			Volume:
			<select id='volumeUnit' onchange="doChange()">
				<option data-value='$v Tsp(s)' data-mult=1 data-offset=0 data-decimals=1>
					Tsp
				</option>
				<option data-value='$vml' data-mult=5 data-offset=0 data-decimals=0>
					Millilitres
				</option>
			</select>
		</span>
		</br>
		<span>
			Temperature:
			<select id='tempUnit' onchange="doChange()">
				<option data-value='$v°C' data-mult=1 data-offset=0 data-decimals=0>
					°C
				</option>
				<option data-value='$v°F' data-mult=1.8 data-offset=32 data-decimals=0>
					°F
				</option>
				<option data-value='Gas Mark $v' data-mult=0.072 data-offset=-8.72 data-decimals=0>
					Gas Mark
				</option>
			</select>
		</span>
	</p>
	<h2>Ingredients:</h2>
	<p id='ingredients'>
		<span class='weight' id='butter' data-value=150>150g</span>: Unsalted Butter</br>
		<span class='weight' id='sugar' data-value=300>300g</span>: Light Brown Muscovado Sugar</br>
		<span class='weight' id='cocoa' data-value=75>75g</span>: Cocoa Powder</br>
		<span class='weight' id='flour' data-value=150>150g</span>: Plain Flour</br>
		<span class='weight' id='chocolate' data-value=150>150g</span>: Any Chocolate (try a mixture, I found that chocolate oranges work best)</br>
		<span class='volume' id='bicarb' data-value=1>1 Tsp(s)</span>: Bicarb</br>
		<span class='volume' id='vanilla' data-value=1>1 Tsp(s)</span>: Vanilla Extract</br>
		<span class='noUnit' id='eggs' data-value=4>4</span>: Large Eggs</br>
		<span class='noUnit' id='salt' data-value='Pinch'>Pinch</span>: Salt
	</p>
	<h2>Prep:</h2>
	<p id='prep'>
		Preheat oven <span id='temp' data-value=190>190°C</span></br>
		Grease Brownie Tin</br>
		Chop Chocolate (Fairly Fine)</br>
	</p>
	<h2>Method:</h2>
	<p id='method'>
		During all of these steps, keep the mix warm by taking it on and off of the heat</br></br>
		Melt the butter in the pan, then add the sugar, mix well and wait until it melts slightly</br>
		Sift the dry ingredients into the pan and fold</br>
		Whisk eggs and vanilla together, stir into pan</br>
		Stir the chopped chocolate in very quickly, immediately pour and bake
	</p>
	<h2>Timings:</h2>
	<p id='timings'>
		20-25m, checking consistency at 20m with a butter knife or skewer
	</p>
	<script type="text/javascript">
		function doChange() {
			var weightUnit = document.getElementById("weightUnit");
			var volumeUnit = document.getElementById("volumeUnit");
			var tempUnit = document.getElementById("tempUnit")

			weightUnit = weightUnit.options[weightUnit.selectedIndex];
			volumeUnit = volumeUnit.options[volumeUnit.selectedIndex];
			tempUnit = tempUnit.options[tempUnit.selectedIndex];

			for (i of document.getElementById("ingredients").children) {
				if (i.tagName == "SPAN") {
					if (i.className == "weight") {
						var newValue = (parseFloat(i.dataset.value * weightUnit.dataset.mult)+parseFloat(weightUnit.dataset.offset)).toFixed(weightUnit.dataset.decimals);
						i.innerHTML = weightUnit.dataset.value.replace("$v", newValue.toString());
					}
					if (i.className == "volume") {
						var newValue = (parseFloat(i.dataset.value * volumeUnit.dataset.mult)+parseFloat(volumeUnit.dataset.offset)).toFixed(volumeUnit.dataset.decimals);
						i.innerHTML = volumeUnit.dataset.value.replace("$v", newValue.toString());
					}
				}
			}
			var temp = document.getElementById("temp");
			var newValue = (parseFloat(temp.dataset.value * tempUnit.dataset.mult)+parseFloat(tempUnit.dataset.offset)).toFixed(tempUnit.dataset.decimals);
			temp.innerHTML = tempUnit.dataset.value.replace("$v", newValue.toString());
		}
	</script>
</html>
